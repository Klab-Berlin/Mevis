var net = require('net');
var client = net.connect(
	{port:process.argv[2]},
	function() {
		process.stdin.setRawMode(true);
		process.stdin.pipe(client);
		client.pipe(process.stdout);
	}
);

client.on('close', function done () {
  process.stdin.setRawMode(false);
  process.stdin.pause();
  client.removeListener('close', done);
});

process.stdin.on('end', function () {
  client.destroy();
  console.log();
});

process.stdin.on('data', function (b) {
  if (b.length === 1 && b[0] === 4) {
    process.stdin.emit('end');
  }
});